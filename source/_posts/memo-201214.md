---
title: 技術学習記録 201214
tags:
  - Blitz
  - Prisma
  - 技術学習記録
date: 2020-12-14 09:44:07
category: Development
---

{% post_link memo201211 前回の記事 %} で書いたコードを改善していく。
多分初心者向けにかんたんにしようとしてくれていて、フォーム周りをReact系技術なしで書かれていたので、それをReact + TypeScriptぽくしていく。

<!-- more -->

---

## 目次

<!-- toc -->

## 問題のコード
`app/memos/components/MemoForm.tsx`
```ts
const MemoForm = ({ initialValues, onSubmit }: MemoFormProps) => {
  return (
    <form
      onSubmit={(event) => {
        event.preventDefault()
        onSubmit(event)
      }}
    >
      <input placeholder="タイトル" defaultValue={initialValues.title} />
      <textarea placeholder="本文" defaultValue={initialValues.body} />
      <button>Submit</button>
    </form>
  )
}
```
ここでonSubmitでeventを渡した結果、

`app/memos/pages/memos/new.tsx`
```html
      <MemoForm
        initialValues={{}}
        onSubmit={async (event) => {
          if (currentUser) {
            try {
              const memo = await createMemoMutation({
                data: {
                  title: event.target[0].value,
                  body: event.target[1].value,
                  user: { connect: { id: currentUser.id } },
                },
              })
              alert("succress")
              router.push(`/memos/${memo.id}`)
            } catch (error) {
              alert("error")
              console.log(error)
            }
          }
        }}
      />
```
ここで参照する `event.target[0].value` がany型になってしまっている。
これをいい感じに修正したい。

## 余談
参考にしているサイトには続編が来ていることを確認。
> [タグ「Blitz.js」の記事一覧 - bagelee（ベーグリー）](https://bagelee.com/tag/blitz-js/)

早く追いつこう。
