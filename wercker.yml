box: node
build:
  steps:
    - npm-install
    - script:
      name: echo nodejs information
      code: |
        echo "node version $(node -v) running"
        echo "npm version $(npm -v) running"
    - script:
      name: generate test
      code: |
        echo "yarn generate"
        yarn generate
  after-steps:
    - shoya/slack-notifier@1.5.0:
      url: $SLACK_WEBHOOK_URL_BUILD
      channel: blog
      username: wercker-build
      icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL0CTHKCM/missile228_-__________________72148069__.jpg
      custom_message: buildテストが終わったわよ $WERCKER_BUILD_URL
lint:
  steps:
    - npm-install
    - script:
      name: textlint --fix
      code: |
        yarn
        yarn lintfix
    - script:
      name: textlint
      code: |
        yarn lint
  after-steps:
    - shoya/slack-notifier@1.5.0:
      url: $SLACK_WEBHOOK_URL_LINT
      channel: blog
      username: wercker-lint
      icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL0CTHXJ9/__________-__________________74606294__.png
      custom_message: lintテストが完了です。 $WERCKER_BUILD_URL
deploy:
  steps:
    - npm-install
    - script:
      name: generate
      code: |
        yarn
        yarn generate
    - script:
      name: upload
      code: yarn deploy
  after-steps:
    - shoya/slack-notifier@1.5.0:
      url: $SLACK_WEBHOOK_URL_DEPLOY
      channel: blog
      username: wercker-deploy
      icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL2GRHYES/__________-______49406621__.jpg
      custom_message: $WERCKER_GIT_BRANCH をデプロイしたよ。お疲れ。
