box: node
build:
  steps:
    - npm-install
    - script:
      name: echo nodejs information
      code: |
        echo "node version $(node -v) running"
        echo "npm version $(npm -v) running"
    - script:
      name: generate test
      code: |
        echo "yarn generate"
        yarn generate
  after-steps:
    - install-packages:
        packages: ruby
    - sherzberg/slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL
        channel: blog
        username: wercker-build
        icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL0CTHKCM/missile228_-__________________72148069__.jpg
lint:
  steps:
    - npm-install
    - script:
      name: textlint --fix
      code: |
        yarn
        yarn lintfix
    - script:
      name: textlint
      code: |
        yarn lint
  after-steps:
    - install-packages:
        packages: ruby
    - sherzberg/slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL
        channel: blog
        username: wercker-lint
        icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL0CTHXJ9/__________-__________________74606294__.png
deploy:
  steps:
    - npm-install
    - script:
        name: generate
        code: |
          yarn
          yarn generate
    - script:
        name: upload
        code: yarn deploy
  after-steps:
    - install-packages:
        packages: ruby
    - sherzberg/slack-notify:
        webhook_url: $SLACK_WEBHOOK_URL
        channel: blog
        username: wercker-deploy
        icon_url: https://files.slack.com/files-pri/T0J8H1V5X-FL2GRHYES/__________-______49406621__.jpg
